var D=Object.defineProperty,q=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var f=(s,r,a)=>r in s?D(s,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[r]=a,j=(s,r)=>{for(var a in r||(r={}))E.call(r,a)&&f(s,a,r[a]);if(w)for(var a of w(r))B.call(r,a)&&f(s,a,r[a]);return s},_=(s,r)=>q(s,A(r));var N=(s,r,a)=>new Promise((l,d)=>{var b=n=>{try{e(a.next(n))}catch(x){d(x)}},o=n=>{try{e(a.throw(n))}catch(x){d(x)}},e=n=>n.done?l(n.value):Promise.resolve(n.value).then(b,o);e((a=a.apply(s,r)).next())});import{r as u,j as t}from"./three-vendor-D76XtHXd.js";import{I as g}from"./Input-B2dwBdFY.js";import{u as L,h as P,m as v,n as R,o as T,p as U,q as $,r as z,t as G}from"./index-Dg4eWNDb.js";import{I as F}from"./ImageUploader-DkGeYIoK.js";import"./react-vendor-C6O4aKhz.js";const V=()=>{const s=L(),{pathname:r}=P(),a=r.split("/").at(-1),l=+a==4,d=+a==3,[b,o]=u.useState(""),[e,n]=u.useState(()=>l?{title:"",text:""}:d?{name:"",description:"",sub_header:"",header:""}:{name:"",description:"",min_param:"",max_param:"",sub_header:"",header:""}),[x,y]=u.useState(null),[c,S]=u.useState(null),p=i=>{const{name:m,value:h}=i.target;n(C=>_(j({},C),{[m]:h}))},k=i=>N(void 0,null,function*(){i.preventDefault(),o("");try{if(l){if(!e.title||!e.text||!x){o("Пожалуйста, заполните все обязательные поля и загрузите изображение");return}const m={title:e.title,text:e.text,news_photo:x};yield s(R(m)).unwrap(),yield s(T()),n({title:"",text:""})}else if(+a==2){if(!e.name||!e.description||!x||!c||!e.min_param||!e.max_param||!e.header||!e.sub_header){o("Пожалуйста, заполните все обязательные поля и загрузите изображение");return}const m={name:e.name,description:e.description,image_card:x,image_banner:c,min_param:parseInt(e.min_param),max_param:parseInt(e.max_param),sub_header:e.sub_header,header:e.header};yield s(U(m)).unwrap(),yield s($()),n({name:"",description:"",min_param:"",max_param:"",sub_header:"",header:""})}else if(+a==3){if(!e.name||!e.description||!x||!c||!e.header||!e.sub_header){o("Пожалуйста, заполните все обязательные поля и загрузите изображение");return}const m={name:e.name,description:e.description,image_card:x,image_banner:c,sub_header:e.sub_header,header:e.header};yield s(z(m)).unwrap(),yield s(G()),n({name:"",description:"",sub_header:"",header:""})}y(null),s(v(!1))}catch(m){console.error("Failed to create item:",m);const h=l?"новость":+a==2?"оборудование":"решение";alert(`Не удалось создать ${h}. Возможно вы уже добавляли фото с таким названием, переименуйте и попробуйте ещё раз`)}}),I=i=>{if(i==2)return"Добавление нового обрудования";if(i==3)return"Добавление нового решения";if(i==4)return"Добавление новой новости"};return t.jsx("section",{className:`fixed inset-0 flex items-center justify-center px-4 xs:px-5 \r
    sm:px-6 md:px-7 lg:px-8`,children:t.jsxs("div",{className:`bg-white py-[25px] xs:py-[28px] sm:py-[30px] md:py-[33px] \r
      lg:py-[35px] xl:py-[38px] px-4 xs:px-5 sm:px-6 md:px-7 lg:px-8 \r
      rounded-lg w-[90%] xs:w-[85%] sm:w-[80%] md:w-[70%] lg:w-[60%] xl:w-full \r
      max-w-[300px] xs:max-w-[350px] sm:max-w-[450px] md:max-w-[550px] \r
      lg:max-w-[600px] xl:max-w-[663px] relative overflow-y-scroll max-h-[85%]`,children:[t.jsx("button",{onClick:()=>s(v(!1)),className:"absolute top-2 xs:top-2.5 sm:top-3 md:top-3.5 lg:top-4 right-2 xs:right-2.5 sm:right-3 md:right-3.5 lg:right-4 text-gray-500 hover:text-gray-700",children:"✕"}),t.jsx("h2",{className:"text-center text-xl xs:text-2xl sm:text-2xl md:text-3xl lg:text-[32px] font-medium leading-[30px] xs:leading-[32px] sm:leading-[35px] md:leading-[38px] lg:leading-[40.8px] text-gray-400 mb-4 xs:mb-4.5 sm:mb-5 md:mb-5.5 lg:mb-6",children:I(a)}),t.jsxs("form",{onSubmit:k,className:"space-y-[12px] xs:space-y-[14px] sm:space-y-[15px] md:space-y-[16px] lg:space-y-[18px]",children:[!l&&t.jsxs("div",{children:[t.jsx("p",{className:"w-full text-sm text-gray-900",children:"Изображение для баннера"}),t.jsx(F,{banner:!0,onFileSelect:S})]}),t.jsxs("div",{children:[t.jsx("p",{className:"w-full text-sm text-gray-900",children:"Изображение для карточки"}),t.jsx(F,{onFileSelect:y})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"w-full text-xs xs:text-sm text-gray-900",children:"Название"}),t.jsx(g,{type:"text",name:l?"title":"name",className:"block p-2 xs:p-2.5 w-full text-sm xs:text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:l?e.title:e.name,onChange:p})]}),t.jsx("label",{htmlFor:"message",className:"block w-full text-xs xs:text-sm text-gray-900",children:l?"Текст новости":"Описание"}),t.jsx("textarea",{id:"message",name:l?"text":"description",rows:"4",onChange:p,className:"block p-2 xs:p-2.5 w-full text-sm xs:text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:l?e.text:e.description}),!l&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"w-full text-xs xs:text-sm text-gray-900",children:"Заголовок баннера"}),t.jsx(g,{type:"text",name:"sub_header",className:"block p-2 xs:p-2.5 w-full text-sm xs:text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:e.sub_header,onChange:p})]}),t.jsx("label",{htmlFor:"message",className:"block w-full text-xs xs:text-sm text-gray-900",children:"Текст баннера"}),t.jsx("textarea",{id:"message",name:"header",rows:"4",onChange:p,className:"block p-2 xs:p-2.5 w-full text-sm xs:text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:e.header})]}),+a==2&&t.jsxs("div",{className:"flex w-full justify-between gap-4 pb-5",children:[t.jsxs("div",{className:"w-[48%] space-y-2",children:[t.jsx("p",{className:"block w-full text-xs xs:text-sm text-gray-900",children:"От"}),t.jsx(g,{required:!0,type:"number",name:"min_param",value:e.min_param,onChange:p,className:` block p-2 xs:p-2.5 w-[300px]\r
                  text-sm xs:text-base text-gray-400 \r
                  font-normal bg-gray-50 rounded-lg \r
                  border \r
                  border-gray-300`})]}),t.jsxs("div",{className:"w-[48%] space-y-2",children:[t.jsx("p",{className:"block w-full text-xs xs:text-sm text-gray-900",children:"До"}),t.jsx(g,{required:!0,type:"number",name:"max_param",value:e.max_param,className:`block p-2 xs:p-2.5 w-full] \r
                  text-sm xs:text-base text-gray-400 \r
                  font-normal bg-gray-50 rounded-lg border\r
                   border-gray-300`,onChange:p})]})]}),t.jsx("button",{type:"submit",className:"w-full p-2 xs:p-2.5 sm:p-2.5 md:p-3 bg-gray-400 text-white rounded hover:bg-[#2F2F2F] transition-colors text-base xs:text-base sm:text-lg font-medium",children:"Добавить"})]})]})})};export{V as default};
