import{a as V,h as W,j as s}from"./index-fa1d4fc9.js";import{a as l}from"./react-vendor-b1335c93.js";const R=({onFileSelect:a,findProduct:c,banner:d=!1})=>{const[h,p]=l.useState(!1),[g,n]=l.useState(""),t=l.useRef(null),{itemId:D,addNewItemPopup:v,news:j,solutions:U,equipment:k}=V(({user:e})=>e),{pathname:C}=W(),b=C.split("/").at(-1);let r=c,i=+b==4,I=+b==3;if(!c){const e=i?j:I?U:k;r=e==null?void 0:e.find(u=>+u.id==+D)}const[o,x]=l.useState(i?r==null?void 0:r.image:d?r==null?void 0:r.image_banner:(r==null?void 0:r.image_card)||null),m=e=>{e.preventDefault(),e.stopPropagation(),p(e.type==="dragenter"||e.type==="dragover")},f=e=>{if(["image/svg+xml","image/png","image/jpeg"].includes(e.type)){const u=URL.createObjectURL(e);x(u),a&&a(e),n("")}else n("Пожалуйста, загрузите PNG, или JPEG файл.")},E=e=>{e.preventDefault(),e.stopPropagation(),p(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&f(e.dataTransfer.files[0])},T=e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&f(e.target.files[0])},y=()=>{var e;(e=t.current)==null||e.click()},N=()=>{o&&URL.revokeObjectURL(o),x(null),n(""),a&&a(null),t.current&&(t.current.value="")};return s.jsxDEV("div",{className:"w-full mx-auto",children:[o&&!v&&r?s.jsxDEV("div",{className:"relative p-8 mt-2 border-2 border-dashed rounded-lg text-center",children:[s.jsxDEV("img",{src:o,alt:"Текущее изображение",className:"max-h-[200px] mx-auto rounded-lg"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:88,columnNumber:11},globalThis),s.jsxDEV("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),N()},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-gray-800 text-white rounded-full hover:bg-gray-900",children:"×"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:93,columnNumber:11},globalThis)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:87,columnNumber:9},globalThis):s.jsxDEV("div",{className:`relative p-8 mt-2 border-2 border-dashed rounded-lg text-center cursor-pointer transition-colors
            ${h?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:m,onDragLeave:m,onDragOver:m,onDrop:E,onClick:y,children:[s.jsxDEV("input",{ref:t,type:"file",accept:".svg,.png,.jpg,.jpeg",onChange:T,className:"hidden"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:119,columnNumber:11},globalThis),o?s.jsxDEV(s.Fragment,{children:[s.jsxDEV("img",{src:o,alt:"Предпросмотр",className:"max-h-[200px] mx-auto rounded-lg"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:129,columnNumber:15},globalThis),s.jsxDEV("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),N()},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-gray-800 text-white rounded-full hover:bg-gray-900",children:"×"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:134,columnNumber:15},globalThis)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:128,columnNumber:13},globalThis):s.jsxDEV(s.Fragment,{children:[s.jsxDEV("p",{className:"mb-2 text-sm text-gray-500",children:[s.jsxDEV("span",{className:"font-semibold",children:"Нажмите, чтобы загрузить"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:149,columnNumber:17},globalThis)," ","или перетащите"]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:148,columnNumber:15},globalThis),s.jsxDEV("p",{className:"text-xs text-gray-500",children:["PNG, JPG"," ",i?"(Рекомендуемое разрешение 847 x 300 px)":d?"(Рекомендуемое разрешение 1920 x 900 px)":"(Рекомендуемое разрешение 320 x 320 px)"]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:152,columnNumber:15},globalThis)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:147,columnNumber:13},globalThis)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:106,columnNumber:9},globalThis),g&&s.jsxDEV("p",{className:"mt-2 text-red-500 text-sm",children:g},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:165,columnNumber:17},globalThis)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:85,columnNumber:5},globalThis)};export{R as I};
