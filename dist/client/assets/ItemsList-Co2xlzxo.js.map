{"version":3,"file":"ItemsList-Co2xlzxo.js","sources":["../../../src/components/shared/ItemsList.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Title from \"../ui/Title\";\r\nimport Button from \"../ui/Button\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  changeEquipmentId,\r\n  changeItemId,\r\n  changeShowPopup,\r\n  changeSolutionsId,\r\n  getEquipmentById,\r\n  getSolutionsById,\r\n} from \"../../utils/slice/userSlice\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport useLatinFormat from \"../../utils/hooks/useLatinFormat\";\r\n\r\nexport default function ItemsList({\r\n  limited = true,\r\n  list,\r\n  href,\r\n  title,\r\n  equipment,\r\n}) {\r\n  const [lim, setLim] = useState(limited);\r\n  const [visibleItems, setVisibleItems] = useState([]);\r\n  const [hiddenItems, setHiddenItems] = useState([]);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n  // const [formattedPriceValidUntil, setFormattedPriceValidUntil] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const { pathname } = useLocation();\r\n  const isOrders = pathname.split(\"/\")[2] === \"orders\";\r\n  let getTitle;\r\n\r\n  useEffect(() => {\r\n    if (!list) return;\r\n\r\n    if (lim && list.length > 6) {\r\n      setVisibleItems(list.slice(0, 6));\r\n      setHiddenItems(list.slice(6));\r\n    } else {\r\n      setVisibleItems(list);\r\n      setHiddenItems([]);\r\n    }\r\n\r\n    if (!isOrders && list.length > 0) {\r\n      getTitle = list[0].hasOwnProperty(\"max_param\");\r\n    }\r\n  }, [list, limited, lim]);\r\n\r\n  const handleChangeShowPopup = (boolean, id) => {\r\n    dispatch(changeShowPopup(boolean));\r\n    dispatch(changeItemId(id));\r\n  };\r\n\r\n  const handleClickItem = async (id) => {\r\n    if (equipment) {\r\n      await dispatch(getEquipmentById(id));\r\n      dispatch(changeSolutionsId(null));\r\n    } else {\r\n      await dispatch(getSolutionsById(id));\r\n      dispatch(changeEquipmentId(null));\r\n    }\r\n    dispatch(changeItemId(id));\r\n  };\r\n\r\n  const handelClickLimited = () => {\r\n    setIsAnimating(true);\r\n\r\n    // Добавляем элементы по одному с задержкой для создания эффекта плавного появления\r\n    let delay = 0;\r\n    const delayIncrement = 100;\r\n\r\n    hiddenItems.forEach((item, index) => {\r\n      setTimeout(() => {\r\n        setVisibleItems((prev) => [...prev, item]);\r\n\r\n        // Когда все элементы добавлены, завершаем анимацию и снимаем ограничение\r\n        if (index === hiddenItems.length - 1) {\r\n          setTimeout(() => {\r\n            setIsAnimating(false);\r\n            setLim(false);\r\n          }, 300);\r\n        }\r\n      }, delay);\r\n\r\n      delay += delayIncrement;\r\n    });\r\n  };\r\n\r\n  // useEffect(() => {\r\n  //   // Calculate the date only on client-side to avoid hydration mismatch\r\n  //   const priceValidUntil = new Date();\r\n  //   priceValidUntil.setFullYear(priceValidUntil.getFullYear() + 1);\r\n  //   setFormattedPriceValidUntil(priceValidUntil.toISOString().split(\"T\")[0]);\r\n  // }, []);\r\n\r\n  const renderItem = (item, index) => {\r\n    const { id, name, description, image_card, image_card_alt } = item;\r\n    const isNewlyAdded = index >= 6 && isAnimating;\r\n\r\n    return (\r\n      <Link\r\n        itemScope\r\n        itemType=\"http://schema.org/Product\"\r\n        to={\r\n          equipment\r\n            ? `/equipment/${useLatinFormat(name)}`\r\n            : `/solutions/${useLatinFormat(name)}`\r\n        }\r\n        onClick={() => handleClickItem(id)}\r\n        key={id}\r\n        className={`max-h-[440px] w-[280px] xs:w-[300px] sm:w-[320px] md:w-[330px] \r\n        lg:w-[340px] xl:w-[345px] 2xl:w-[348px] 3xl:w-[352px] border border-gray-100 p-3 xs:p-3.5 sm:p-4\r\n        transition-all duration-500 ease-in-out ${\r\n          isNewlyAdded\r\n            ? \"opacity-0 transform translate-y-8 animate-fadeIn\"\r\n            : \"opacity-100\"\r\n        }`}\r\n        style={{\r\n          animationDelay: isNewlyAdded ? `${(index - 6) * 100}ms` : \"0ms\",\r\n          animationFillMode: \"forwards\",\r\n        }}\r\n      >\r\n        <img\r\n          itemProp=\"image\"\r\n          className=\"object-cover h-[260px] w-[260px] xs:h-[275px] xs:w-[275px] sm:h-[290px] sm:w-[290px] md:h-[300px] md:w-[300px] lg:h-[310px] lg:w-[310px] xl:h-[315px] xl:w-[315px] 2xl:h-[318px] 2xl:w-[318px] 3xl:h-[320px] 3xl:w-[320px]\"\r\n          src={image_card || \"/img/placeholder.svg\"}\r\n          alt={image_card_alt}\r\n          title={image_card_alt}\r\n        />\r\n        <h3\r\n          itemProp=\"name\"\r\n          className=\"text-gray-400 text-xs xs:text-xs sm:text-sm uppercase font-normal my-1.5 xs:my-1.5 sm:my-2\"\r\n        >\r\n          {name}\r\n        </h3>\r\n        <meta itemProp=\"brand\" content=\"Recensa\" />\r\n        <meta itemProp=\"sku\" content={id} />\r\n        <div\r\n          className=\"invisible w-0 h-0\"\r\n          itemProp=\"offers\"\r\n          itemScope\r\n          itemType=\"http://schema.org/Offer\"\r\n        >\r\n          <meta itemProp=\"price\" content=\"5000\" />\r\n          <meta itemProp=\"priceCurrency\" content=\"RUB\" />\r\n          <meta itemProp=\"availability\" content=\"https://schema.org/InStock\" />\r\n          {/* <meta itemProp=\"priceValidUntil\" content={formattedPriceValidUntil} /> */}\r\n          <link\r\n            itemProp=\"url\"\r\n            href={\r\n              equipment\r\n                ? `/equipment/${useLatinFormat(name)}`\r\n                : `/solutions/${useLatinFormat(name)}`\r\n            }\r\n          />\r\n        </div>\r\n        <div className=\"flex-center justify-between gap-2\">\r\n          <div\r\n            itemProp=\"description\"\r\n            dangerouslySetInnerHTML={{ __html: description }}\r\n            className=\"w-[50%] text-[11px] max-h-[60px] overflow-hidden xs:text-[12px] sm:text-[13px] text-gray-300\"\r\n          />\r\n\r\n          <Button\r\n            noLink={true}\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              handleChangeShowPopup(true, id);\r\n            }}\r\n            text={\"Оставить заявку\"}\r\n            className=\"w-[50%] py-[16px] px-[12px] hover:bg-gray-450\"\r\n          />\r\n        </div>\r\n      </Link>\r\n    );\r\n  };\r\n\r\n  return visibleItems.length > 0 ? (\r\n    <section className=\"container py-12 xs:py-14 sm:py-16 md:py-18 lg:py-20 xl:py-20 2xl:py-20 3xl:py-20\">\r\n      <div itemScope itemType=\"https://schema.org/ItemList\">\r\n        <Title\r\n          itemProp=\"name\"\r\n          text={title ? title : getTitle ? \"Оборудование\" : \"решения\"}\r\n          className=\"ml-5 xs:ml-0 inline-block text-lg xs:text-xl sm:text-xl md:text-2xl lg:text-2xl xl:text-2xl 2xl:text-2xl 3xl:text-2xl font-normal mb-[30px] xs:mb-[35px] sm:mb-[40px] md:mb-[45px] lg:mb-[50px] xl:mb-[50px] 2xl:mb-[50px] 3xl:mb-[50px] border-b border-b-gray-400\"\r\n        />\r\n        <meta itemProp=\"numberOfItems\" content={list ? list.length : 0} />\r\n\r\n        <div className=\"flex justify-center w-full transition-all\">\r\n          <article className=\"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-8\">\r\n            {visibleItems.map((item, index) => renderItem(item, index))}\r\n          </article>\r\n        </div>\r\n      </div>\r\n      {lim && hiddenItems.length > 0 && (\r\n        <div className=\"flex justify-center\">\r\n          <Button\r\n            onClick={() => handelClickLimited()}\r\n            text={\"смотреть все\"}\r\n            className=\"bg-white w-[90%] xs:w-full sm:w-full md:w-[800px] lg:w-[900px] xl:w-[1000px] 2xl:w-[1100px] 3xl:w-[1158px] py-[18px] xs:py-[20px] sm:py-[22px] md:py-[24px] lg:py-[26px] xl:py-[26px] 2xl:py-[26px] 3xl:py-[26px] text-gray-400 border border-gray-400 mt-[40px] xs:mt-[45px] sm:mt-[50px] md:mt-[55px] lg:mt-[60px] xl:mt-[62px] 2xl:mt-[63px] 3xl:mt-[64px] hover:bg-gray-50 hover:border-gray-200\"\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      <style jsx=\"true\">{`\r\n        @keyframes fadeIn {\r\n          from {\r\n            opacity: 0;\r\n            transform: translateY(20px);\r\n          }\r\n          to {\r\n            opacity: 1;\r\n            transform: translateY(0);\r\n          }\r\n        }\r\n\r\n        .animate-fadeIn {\r\n          animation-name: fadeIn;\r\n          animation-duration: 500ms;\r\n          animation-timing-function: ease-out;\r\n        }\r\n      `}</style>\r\n    </section>\r\n  ) : (\r\n    <p>Загрузка...</p>\r\n  );\r\n}\r\n"],"names":["ItemsList","limited","list","href","title","equipment","lim","setLim","useState","visibleItems","setVisibleItems","hiddenItems","setHiddenItems","isAnimating","setIsAnimating","dispatch","useDispatch","pathname","useLocation","isOrders","getTitle","useEffect","handleChangeShowPopup","boolean","id","changeShowPopup","changeItemId","handleClickItem","__async","getEquipmentById","changeSolutionsId","getSolutionsById","changeEquipmentId","handelClickLimited","delay","delayIncrement","item","index","prev","renderItem","name","description","image_card","image_card_alt","isNewlyAdded","jsxs","Link","useLatinFormat","jsx","Button","e","Title"],"mappings":"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"}