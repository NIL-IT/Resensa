var k=Object.defineProperty,O=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var g=(s,r,e)=>r in s?k(s,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[r]=e,h=(s,r)=>{for(var e in r||(r={}))w.call(r,e)&&g(s,e,r[e]);if(f)for(var e of f(r))A.call(r,e)&&g(s,e,r[e]);return s},b=(s,r)=>O(s,E(r));var C=(s,r,e)=>new Promise((x,l)=>{var d=p=>{try{u(e.next(p))}catch(n){l(n)}},a=p=>{try{u(e.throw(p))}catch(n){l(n)}},u=p=>p.done?x(p.value):Promise.resolve(p.value).then(d,a);u((e=e.apply(s,r)).next())});import{u as P,a as U,e as V,g as D,j as o,S as W,f as _}from"./index-BVaQPbwp.js";import{r as i}from"./three-vendor-BPj0iCA8.js";import{I as c}from"./Input-CgKIBXoQ.js";import"./react-vendor-DgitYnsx.js";const S=[{label:"Доставлен",value:"Доставлен"},{label:"Отменен",value:"Отменен"},{label:"Оплачен",value:"Оплачен"}];function B(){const s=P(),r=U(m=>m.user.orders||[]),[e,x]=i.useState(!0),[l,d]=i.useState(""),[a,u]=i.useState({name:"",number:"",date:"",client_name:"",state:"",order_amount:""}),p=m=>{u(t=>b(h({},t),{state:m}))},n=m=>{const{name:t,value:N}=m.target;t==="number"&&d(""),u(y=>b(h({},y),{[t]:N}))},j=m=>r.some(t=>t.number===m),v=m=>C(this,null,function*(){m.preventDefault();try{const t=Number(a.number);if(j(t)){d("Заказ с таким номером уже существует.");return}const N=b(h({},a),{number:t,order_amount:Number(a.order_amount)});yield s(_(N)),yield s(D()),u({name:"",number:"",date:"",client_name:"",state:"",order_amount:""}),d(""),x(!1)}catch(t){console.error("Failed to create order:",t),d("Не удалось создать заказ. Пожалуйста, проверьте введенные данные.")}});return i.useEffect(()=>{s(V(e))},[e]),i.useEffect(()=>{s(D())},[]),o.jsxDEV("section",{className:"fixed inset-0 flex items-center justify-center px-4 xs:px-5 sm:px-6 md:px-7 lg:px-8",children:o.jsxDEV("div",{className:`md:h-[70%] lg:h-[75%] bg-white py-[25px] xs:py-[28px] sm:py-[30px] md:py-[33px] lg:py-[35px] \r
      xl:py-[38px] px-4 xs:px-5 sm:px-6 md:px-7 lg:px-8 rounded-lg w-[90%] xs:w-[85%] sm:w-[80%] \r
      md:w-[70%] lg:w-[60%] xl:w-full max-w-[300px] xs:max-w-[350px] sm:max-w-[400px] md:max-w-[450px] l\r
      g:max-w-[500px] xl:max-w-[663px] relative overflow-y-auto`,children:[o.jsxDEV("button",{onClick:()=>x(!1),className:"absolute top-2 xs:top-2.5 sm:top-3 md:top-3.5 lg:top-4 right-2 xs:right-2.5 sm:right-3 md:right-3.5 lg:right-4 text-gray-500 hover:text-gray-700",children:"✕"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:111,columnNumber:9},this),o.jsxDEV("h2",{className:"text-center text-xl xs:text-2xl sm:text-2xl md:text-3xl lg:text-[32px] font-medium leading-[30px] xs:leading-[32px] sm:leading-[35px] md:leading-[38px] lg:leading-[40.8px] text-gray-400 mb-4 xs:mb-4.5 sm:mb-5 md:mb-5.5 lg:mb-10",children:"Добавить заказ"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:117,columnNumber:9},this),o.jsxDEV("form",{onSubmit:v,className:"space-y-[12px] xs:space-y-[14px] sm:space-y-[20px] md:space-y-[24px] lg:space-y-[40px]",children:[o.jsxDEV("div",{className:"space-y-[12px] xs:space-y-[14px] sm:space-y-[15px] md:space-y-[16px] lg:space-y-[18px]",children:[o.jsxDEV(c,{type:"text",name:"name",placeholder:"Наименование заказа",value:a.name,onChange:n,required:!0},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:125,columnNumber:13},this),o.jsxDEV("div",{children:[o.jsxDEV(c,{type:"number",name:"number",placeholder:"Номер заказа",value:a.number,onChange:n,required:!0},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:134,columnNumber:15},this),l&&o.jsxDEV("p",{className:"text-red text-sm mt-1",children:l},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:142,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:133,columnNumber:13},this),o.jsxDEV(c,{type:"date",name:"date",value:a.date,onChange:n,required:!0},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:144,columnNumber:13},this),o.jsxDEV(c,{type:"text",name:"client_name",placeholder:"Данные клиента",value:a.client_name,onChange:n,required:!0},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:151,columnNumber:13},this),o.jsxDEV(W,{handleSelectChange:p,options:S,placeholder:"Статус заказа",border:!0,className:"w-full p-2 bg-gray-75 rounded focus:outline-none focus:ring-2 font-normal text-base text-gray-400 placeholder:text-gray-150"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:159,columnNumber:13},this),o.jsxDEV(c,{type:"number",name:"order_amount",placeholder:"Сумма заказа",value:a.order_amount,onChange:n,required:!0},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:168,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:124,columnNumber:11},this),o.jsxDEV("button",{type:"submit",className:"w-full p-2 xs:p-2.5 sm:p-2.5 md:p-3 bg-gray-400 text-white uppercase rounded hover:bg-[#2F2F2F] transition-colors text-base xs:text-base sm:text-lg font-medium",children:"Сохранить"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:178,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:120,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:105,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/shared/popup/AddOrderPopup.jsx",lineNumber:104,columnNumber:5},this)}export{B as default};
