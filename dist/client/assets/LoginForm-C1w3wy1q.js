var j=Object.defineProperty,w=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var x=(a,s,t)=>s in a?j(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,f=(a,s)=>{for(var t in s||(s={}))v.call(s,t)&&x(a,t,s[t]);if(d)for(var t of d(s))N.call(s,t)&&x(a,t,s[t]);return a},h=(a,s)=>w(a,b(s));var g=(a,s,t)=>new Promise((o,r)=>{var c=n=>{try{l(t.next(n))}catch(i){r(i)}},m=n=>{try{l(t.throw(n))}catch(i){r(i)}},l=n=>n.done?o(n.value):Promise.resolve(n.value).then(c,m);l((t=t.apply(a,s)).next())});import{u as k,M as F,a as L,G as R,r as S,N as u,A as p,j as e,L as A,a9 as y}from"./index-C2R12oiW.js";function q(){const a=k(),s=F(),{error:t}=L(l=>l.user),[o,r]=R.useState({username:"",password:""});S.useEffect(()=>{a(u(!1)),p.get("access_token")&&(a(u(!0)),s("/admin/1"))},[a,s]);const c=l=>{r(h(f({},o),{[l.target.name]:l.target.value}))},m=l=>g(this,null,function*(){l.preventDefault();try{const n=yield a(y(o));if(y.fulfilled.match(n)){const i=n.payload;p.set("access_token",i,{expires:1}),a(u(!0)),s("/admin/1")}}catch(n){console.error("Login failed:",n)}r({username:"",password:""})});return e.jsx("article",{className:"w-screen h-screen",children:e.jsxs("div",{className:"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[e.jsx(A,{to:"/",children:e.jsx("img",{className:"mx-auto h-10 w-auto",src:"/icon/logo.svg",alt:"Recensa",title:"Recensa"})}),e.jsx("h2",{className:"mt-10 text-center text-2xl/9 font-bold tracking-tight text-gray-900",children:"Войти в аккаунт"})]}),e.jsx("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm/6 font-medium text-gray-900",children:"Имя пользователя"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{type:"text",name:"username",id:"username",value:o.username,onChange:c,required:!0,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("label",{htmlFor:"password",className:"block text-sm/6 font-medium text-gray-900",children:"Пароль"})}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{type:"password",name:"password",id:"password",value:o.password,onChange:c,required:!0,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-gray-400 sm:text-sm/6"})})]}),t&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:t}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-gray-400 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-sm hover:bg-gray-300 transition-colors",children:"Войти"})})]})})]})})}export{q as default};
