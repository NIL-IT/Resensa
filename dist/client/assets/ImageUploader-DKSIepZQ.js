import{a as W,h as w,j as s}from"./index-i9StXdMW.js";import{r as t}from"./three-vendor-BPj0iCA8.js";const L=({onFileSelect:n,findProduct:d,banner:c=!1})=>{const[D,p]=t.useState(!1),[f,l]=t.useState(""),a=t.useRef(null),{itemId:v,addNewItemPopup:j,news:U,solutions:h,equipment:k}=W(({user:e})=>e),{pathname:C}=w(),g=C.split("/").at(-1);let r=d,i=+g==4,I=+g==3;if(!d){const e=i?U:I?h:k;r=e==null?void 0:e.find(m=>+m.id==+v)}const[o,x]=t.useState(i?r==null?void 0:r.image:c?r==null?void 0:r.image_banner:(r==null?void 0:r.image_card)||null),u=e=>{e.preventDefault(),e.stopPropagation(),p(e.type==="dragenter"||e.type==="dragover")},N=e=>{if(["image/svg+xml","image/png","image/jpeg"].includes(e.type)){const m=URL.createObjectURL(e);x(m),n&&n(e),l("")}else l("Пожалуйста, загрузите PNG, или JPEG файл.")},E=e=>{e.preventDefault(),e.stopPropagation(),p(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&N(e.dataTransfer.files[0])},y=e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&N(e.target.files[0])},V=()=>{var e;(e=a.current)==null||e.click()},b=()=>{o&&URL.revokeObjectURL(o),x(null),l(""),n&&n(null),a.current&&(a.current.value="")};return s.jsxDEV("div",{className:"w-full mx-auto",children:[o&&!j&&r?s.jsxDEV("div",{className:"relative p-8 mt-2 border-2 border-dashed rounded-lg text-center",children:[s.jsxDEV("img",{src:o,alt:"Текущее изображение",className:"max-h-[200px] mx-auto rounded-lg"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:88,columnNumber:11},void 0),s.jsxDEV("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),b()},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-gray-800 text-white rounded-full hover:bg-gray-900",children:"×"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:93,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:87,columnNumber:9},void 0):s.jsxDEV("div",{className:`relative p-8 mt-2 border-2 border-dashed rounded-lg text-center cursor-pointer transition-colors
            ${D?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:u,onDragLeave:u,onDragOver:u,onDrop:E,onClick:V,children:[s.jsxDEV("input",{ref:a,type:"file",accept:".svg,.png,.jpg,.jpeg",onChange:y,className:"hidden"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:119,columnNumber:11},void 0),o?s.jsxDEV(s.Fragment,{children:[s.jsxDEV("img",{src:o,alt:"Предпросмотр",className:"max-h-[200px] mx-auto rounded-lg"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:129,columnNumber:15},void 0),s.jsxDEV("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),b()},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-gray-800 text-white rounded-full hover:bg-gray-900",children:"×"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:134,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:128,columnNumber:13},void 0):s.jsxDEV(s.Fragment,{children:[s.jsxDEV("p",{className:"mb-2 text-sm text-gray-500",children:[s.jsxDEV("span",{className:"font-semibold",children:"Нажмите, чтобы загрузить"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:149,columnNumber:17},void 0)," ","или перетащите"]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:148,columnNumber:15},void 0),s.jsxDEV("p",{className:"text-xs text-gray-500",children:["PNG, JPG"," ",i?"(Рекомендуемое разрешение 847 x 300 px)":c?"(Рекомендуемое разрешение 1920 x 900 px)":"(Рекомендуемое разрешение 320 x 320 px)"]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:152,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:147,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:106,columnNumber:9},void 0),f&&s.jsxDEV("p",{className:"mt-2 text-red-500 text-sm",children:f},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:165,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:85,columnNumber:5},void 0)};export{L as I};
