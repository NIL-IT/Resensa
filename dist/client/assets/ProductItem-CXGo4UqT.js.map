{"version":3,"file":"ProductItem-CXGo4UqT.js","sources":["../../../src/components/shared/OrderStatus.jsx","../../../src/components/shared/ProductDescription.jsx","../../../src/components/pages/ProductItem.jsx"],"sourcesContent":["import React from \"react\";\r\nimport Title from \"../ui/Title\";\r\nimport {\r\n  changeOrderNumber,\r\n  changeShowStatus,\r\n} from \"../../utils/slice/userSlice\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nexport default function OrderStatus() {\r\n  const dispatch = useDispatch();\r\n  const [value, setValue] = React.useState(\"\");\r\n  const handleChange = ({ target: { value } }) => {\r\n    setValue(value);\r\n  };\r\n  const handleClickStatus = (e) => {\r\n    e.preventDefault();\r\n\r\n    dispatch(changeShowStatus(true));\r\n    dispatch(changeOrderNumber(value));\r\n  };\r\n  return (\r\n    <section className=\"overflow-hidden bg-gray-200 py-[69px] flex-center flex-col justify-center gap-10 mt-[35px] px-5\">\r\n      <Title\r\n        text=\"вы можете проверить статус своего заказа\"\r\n        className=\"text-xl font-normal text-gray-400 ml-3 sm:ml-0\"\r\n      />\r\n\r\n      <form\r\n        onSubmit={handleClickStatus}\r\n        className=\"w-[600px] flex flex-col items-center gap-5   md:flex-row md:flex-center md:justify-center \"\r\n      >\r\n        <input\r\n          placeholder=\"Номер заказа\"\r\n          onChange={handleChange}\r\n          value={value}\r\n          type=\"number\"\r\n          className=\"bg-white py-[18px] px-6 w-[300px] sm:w-[370px] text-base font-normal\"\r\n          required\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          className={\r\n            \"group bg-gray-400 text-white font-normal py-[15px] px-[30px] text-xs uppercase flex-center gap-5\"\r\n          }\r\n        >\r\n          <img\r\n            className={`group-hover:translate-x-1 transition-all w-[30px]`}\r\n            src=\"/icon/arrow.svg\"\r\n            alt=\"arrow\"\r\n            title=\"Нажмите чтобы посмотреть статус заказа\"\r\n          />\r\n\r\n          <p>проверить</p>\r\n        </button>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Title from \"../ui/Title\";\r\n\r\nexport default function ProductDescription({ currentProduct }) {\r\n  return (\r\n    <section className=\"container  pt-10 pb-5 lg:pt-20 lg:pb-10\">\r\n      <Title\r\n        text={\"описание\"}\r\n        className=\"ml-5 xs:ml-0 inline-block text-lg xs:text-xl sm:text-xl md:text-2xl lg:text-2xl xl:text-2xl 2xl:text-2xl 3xl:text-2xl font-normal mb-[30px] xs:mb-[35px] sm:mb-[40px] md:mb-[45px] lg:mb-[50px] xl:mb-[50px] 2xl:mb-[50px] 3xl:mb-[50px] border-b border-b-gray-400\"\r\n      />\r\n      <div className=\"flex justify-center px-5 sm:p-0\">\r\n        <div\r\n          dangerouslySetInnerHTML={{ __html: currentProduct.extra_description }}\r\n          className=\"w-[1160px]\"\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport EquipmentBanner from \"../shared/EquipmentBanner\";\r\nimport Advantages from \"../shared/Advantages\";\r\nimport ItemsList from \"../shared/ItemsList\";\r\nimport Footer from \"../shared/Footer\";\r\nimport OrderStatus from \"../shared/OrderStatus\";\r\nimport {\r\n  changeIsAdmin,\r\n  changeRoutingToOrders,\r\n  getAllOrders,\r\n} from \"../../utils/slice/userSlice\";\r\nimport ProductDescription from \"../shared/ProductDescription\";\r\nimport SeoBlock from \"../shared/SeoBlock\";\r\n\r\nexport default function ProductItem({ list }) {\r\n  const dispatch = useDispatch();\r\n  const { pathname } = useLocation();\r\n  const navigate = useNavigate();\r\n  const { routingToOrders, isAdmin, itemId, equipmentById, solutionsById } =\r\n    useSelector(({ user }) => user);\r\n\r\n  const [prevPathname, setPrevPathname] = useState(pathname);\r\n  const [isFirstVisit, setIsFirstVisit] = useState(true);\r\n  const isEquipment =\r\n    !equipmentById && !solutionsById ? true : equipmentById ? true : false;\r\n\r\n  const [currentProduct, setCurrentProduct] = useState(\r\n    equipmentById ? equipmentById : solutionsById ? solutionsById : list[0]\r\n  );\r\n  document.body.style.overflowY = \"auto\";\r\n  useEffect(() => {\r\n    if (!currentProduct) navigate(\"/\");\r\n  }, [currentProduct]);\r\n\r\n  const scrollToOrders = () => {\r\n    if (itemId) return;\r\n    const widthPage = document.querySelector(\"body\").offsetWidth;\r\n    let scrollPosition;\r\n    if (widthPage > 1600) scrollPosition = 0;\r\n    else if (widthPage > 1200) scrollPosition = 0;\r\n    else if (widthPage > 768) scrollPosition = 800;\r\n    else if (widthPage > 640) scrollPosition = 1200;\r\n    else if (widthPage > 420) scrollPosition = 1300;\r\n    else if (widthPage > 375) scrollPosition = 1300;\r\n    else scrollPosition = 1200;\r\n    scrollPosition = document.body.scrollHeight - scrollPosition;\r\n    setTimeout(() => {\r\n      window.scrollTo({\r\n        top: scrollPosition,\r\n        left: 0,\r\n        behavior: \"smooth\",\r\n      });\r\n    }, 10);\r\n  };\r\n\r\n  // Handle orders routing scroll\r\n  useEffect(() => {\r\n    if (!routingToOrders) return;\r\n    const hasVisited = localStorage.getItem(\"hasVisitedProduct\");\r\n    if (!hasVisited) {\r\n      localStorage.setItem(\"hasVisitedProduct\", \"true\");\r\n      setIsFirstVisit(true);\r\n    } else {\r\n      setIsFirstVisit(false);\r\n    }\r\n\r\n    if (\r\n      (routingToOrders && !isAdmin) ||\r\n      (isFirstVisit && !isAdmin && routingToOrders)\r\n    ) {\r\n      scrollToOrders();\r\n    }\r\n\r\n    if (isFirstVisit) {\r\n      dispatch(changeRoutingToOrders(true));\r\n    }\r\n  }, [routingToOrders, isAdmin, isFirstVisit]);\r\n\r\n  // Handle product changes\r\n  useEffect(() => {\r\n    setCurrentProduct(\r\n      equipmentById ? equipmentById : solutionsById ? solutionsById : list[0]\r\n    );\r\n  }, [pathname, equipmentById, solutionsById]);\r\n\r\n  // Handle pathname changes and scroll behavior\r\n  useEffect(() => {\r\n    if (itemId) {\r\n      window.scrollTo({\r\n        top: 0,\r\n        left: 0,\r\n        behavior: \"smooth\",\r\n      });\r\n      dispatch(changeIsAdmin(null));\r\n      return;\r\n    }\r\n    const prevPath = prevPathname.split(\"/\");\r\n    const currentPath = pathname.split(\"/\");\r\n\r\n    if (prevPath[1] !== currentPath[1] || prevPath[2] !== currentPath[2]) {\r\n      window.scrollTo({\r\n        top: 0,\r\n        left: 0,\r\n        behavior: \"smooth\",\r\n      });\r\n      dispatch(changeRoutingToOrders(false));\r\n    }\r\n    setCurrentProduct(\r\n      equipmentById ? equipmentById : solutionsById ? solutionsById : list[0]\r\n    );\r\n    setPrevPathname(pathname);\r\n  }, [pathname, itemId]);\r\n\r\n  const dataFetchedRef = useRef(false);\r\n  useEffect(() => {\r\n    if (dataFetchedRef.current) return;\r\n    dataFetchedRef.current = true;\r\n    dispatch(getAllOrders());\r\n  }, []);\r\n  return list.length > 0 ? (\r\n    <>\r\n      <SeoBlock\r\n        url={`https://new.recensa.ru/${\r\n          isEquipment\r\n            ? `equipment/${pathname.split(\"/\")[2]}`\r\n            : `solutions/${pathname.split(\"/\")[2]}`\r\n        }`}\r\n        title={currentProduct.page_title}\r\n        description={currentProduct.hidden_seo_text}\r\n      />\r\n      <Helmet>\r\n        <title>{currentProduct.page_title}</title>\r\n        <meta name=\"description\" content={currentProduct.page_description} />\r\n        <meta name=\"keywords\" content={currentProduct.page_keywords} />\r\n        <meta property=\"og:title\" content={currentProduct.page_title} />\r\n        <meta\r\n          property=\"og:url\"\r\n          content={`https://new.recensa.ru/${\r\n            isEquipment\r\n              ? `equipment/${pathname.split(\"/\")[2]}`\r\n              : `solutions/${pathname.split(\"/\")[2]}`\r\n          }`}\r\n        />\r\n        <link\r\n          rel=\"canonical\"\r\n          href={`https://new.recensa.ru/${\r\n            isEquipment\r\n              ? `equipment/${pathname.split(\"/\")[2]}`\r\n              : `solutions/${pathname.split(\"/\")[2]}`\r\n          }`}\r\n        />\r\n      </Helmet>\r\n      <main>\r\n        <EquipmentBanner\r\n          list={list}\r\n          currentProduct={true}\r\n          bannerImg={currentProduct.image_banner}\r\n          cardImg={currentProduct.image_card}\r\n          title={currentProduct.sub_header}\r\n          subtitle={currentProduct.name}\r\n          text={currentProduct.header}\r\n          isButton={true}\r\n          width={\"w-[300px] xs:w-[360px] md:w-[500px] lg:w-[656px]\"}\r\n        />\r\n        <Advantages />\r\n        <ProductDescription currentProduct={currentProduct} />\r\n        <ItemsList\r\n          equipment={isEquipment}\r\n          title={\"каталог\"}\r\n          list={list}\r\n          limited={false}\r\n        />\r\n        <OrderStatus />\r\n      </main>\r\n      <Footer />\r\n    </>\r\n  ) : (\r\n    <></>\r\n  );\r\n}\r\n"],"names":["OrderStatus","dispatch","useDispatch","value","setValue","React","handleChange","handleClickStatus","e","changeShowStatus","changeOrderNumber","jsxs","jsx","Title","ProductDescription","currentProduct","ProductItem","list","pathname","useLocation","navigate","useNavigate","routingToOrders","isAdmin","itemId","equipmentById","solutionsById","useSelector","user","prevPathname","setPrevPathname","useState","isFirstVisit","setIsFirstVisit","isEquipment","setCurrentProduct","useEffect","scrollToOrders","widthPage","scrollPosition","changeRoutingToOrders","changeIsAdmin","prevPath","currentPath","dataFetchedRef","useRef","getAllOrders","Fragment","SeoBlock","Helmet","EquipmentBanner","Advantages","ItemsList","Footer"],"mappings":"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"}