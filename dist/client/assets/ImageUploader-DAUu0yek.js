import{r as l,a as I,h as E,j as t}from"./index-C2R12oiW.js";const G=({onFileSelect:r,findProduct:d,banner:p=!1})=>{const[b,m]=l.useState(!1),[u,o]=l.useState(""),n=l.useRef(null),{itemId:j,addNewItemPopup:y,news:N,solutions:D,equipment:w}=I(({user:e})=>e),{pathname:P}=E(),x=P.split("/").at(-1);let a=d,i=+x==4,R=+x==3;if(!d){const e=i?N:R?D:w;a=e==null?void 0:e.find(g=>+g.id==+j)}const[s,f]=l.useState(i?a==null?void 0:a.image:p?a==null?void 0:a.image_banner:(a==null?void 0:a.image_card)||null),c=e=>{e.preventDefault(),e.stopPropagation(),m(e.type==="dragenter"||e.type==="dragover")},h=e=>{if(["image/svg+xml","image/png","image/jpeg"].includes(e.type)){const g=URL.createObjectURL(e);f(g),r&&r(e),o("")}else o("Пожалуйста, загрузите PNG, или JPEG файл.")},U=e=>{e.preventDefault(),e.stopPropagation(),m(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&h(e.dataTransfer.files[0])},k=e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&h(e.target.files[0])},C=()=>{var e;(e=n.current)==null||e.click()},v=()=>{s&&URL.revokeObjectURL(s),f(null),o(""),r&&r(null),n.current&&(n.current.value="")};return t.jsxs("div",{className:"w-full mx-auto",children:[s&&!y&&a?t.jsxs("div",{className:"relative p-8 mt-2 border-2 border-dashed rounded-lg text-center",children:[t.jsx("img",{src:s,alt:"Текущее изображение",className:"max-h-[200px] mx-auto rounded-lg"}),t.jsx("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),v()},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-gray-800 text-white rounded-full hover:bg-gray-900",children:"×"})]}):t.jsxs("div",{className:`relative p-8 mt-2 border-2 border-dashed rounded-lg text-center cursor-pointer transition-colors
            ${b?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:c,onDragLeave:c,onDragOver:c,onDrop:U,onClick:C,children:[t.jsx("input",{ref:n,type:"file",accept:".svg,.png,.jpg,.jpeg",onChange:k,className:"hidden"}),s?t.jsxs(t.Fragment,{children:[t.jsx("img",{src:s,alt:"Предпросмотр",className:"max-h-[200px] mx-auto rounded-lg"}),t.jsx("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),v()},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-gray-800 text-white rounded-full hover:bg-gray-900",children:"×"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[t.jsx("span",{className:"font-semibold",children:"Нажмите, чтобы загрузить"})," ","или перетащите"]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["PNG, JPG"," ",i?"(Рекомендуемое разрешение 847 x 300 px)":p?"(Рекомендуемое разрешение 1920 x 900 px)":"(Рекомендуемое разрешение 320 x 320 px)"]})]})]}),u&&t.jsx("p",{className:"mt-2 text-red-500 text-sm",children:u})]})};export{G as I};
