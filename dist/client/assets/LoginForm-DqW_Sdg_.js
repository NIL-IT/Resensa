var j=Object.defineProperty,w=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var x=(a,s,t)=>s in a?j(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,f=(a,s)=>{for(var t in s||(s={}))v.call(s,t)&&x(a,t,s[t]);if(d)for(var t of d(s))N.call(s,t)&&x(a,t,s[t]);return a},h=(a,s)=>w(a,b(s));var p=(a,s,t)=>new Promise((n,l)=>{var c=o=>{try{r(t.next(o))}catch(i){l(i)}},m=o=>{try{r(t.throw(o))}catch(i){l(i)}},r=o=>o.done?n(o.value):Promise.resolve(o.value).then(c,m);r((t=t.apply(a,s)).next())});import{R as k,r as R,j as e}from"./three-vendor-CsCe7JNW.js";import{u as F,a as L}from"./react-redux-ViurNiLh.js";import{w as u,r as g,Q as y}from"./index-12U_mSTH.js";import{L as S}from"./index-B2qzKf7k.js";import{b as C}from"./index-Dc3QFRw6.js";import"./react-vendor-DomL0yj5.js";function Q(){const a=F(),s=C(),{error:t}=L(r=>r.user),[n,l]=k.useState({username:"",password:""});R.useEffect(()=>{a(u(!1)),g.get("access_token")&&(a(u(!0)),s("/admin/1"))},[a,s]);const c=r=>{l(h(f({},n),{[r.target.name]:r.target.value}))},m=r=>p(this,null,function*(){r.preventDefault();try{const o=yield a(y(n));if(y.fulfilled.match(o)){const i=o.payload;g.set("access_token",i,{expires:1}),a(u(!0)),s("/admin/1")}}catch(o){console.error("Login failed:",o)}l({username:"",password:""})});return e.jsx("article",{className:"w-screen h-screen",children:e.jsxs("div",{className:"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[e.jsx(S,{to:"/",children:e.jsx("img",{className:"mx-auto h-10 w-auto",src:"/icon/logo.svg",alt:"Recensa",title:"Recensa"})}),e.jsx("h2",{className:"mt-10 text-center text-2xl/9 font-bold tracking-tight text-gray-900",children:"Войти в аккаунт"})]}),e.jsx("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm/6 font-medium text-gray-900",children:"Имя пользователя"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{type:"text",name:"username",id:"username",value:n.username,onChange:c,required:!0,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("label",{htmlFor:"password",className:"block text-sm/6 font-medium text-gray-900",children:"Пароль"})}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{type:"password",name:"password",id:"password",value:n.password,onChange:c,required:!0,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-gray-400 sm:text-sm/6"})})]}),t&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:t}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-gray-400 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-sm hover:bg-gray-300 transition-colors",children:"Войти"})})]})})]})})}export{Q as default};
