var _=Object.defineProperty,O=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var f=(s,a,t)=>a in s?_(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,g=(s,a)=>{for(var t in a||(a={}))E.call(a,t)&&f(s,t,a[t]);if(y)for(var t of y(a))q.call(a,t)&&f(s,t,a[t]);return s},h=(s,a)=>O(s,D(a));var w=(s,a,t)=>new Promise((c,d)=>{var o=m=>{try{l(t.next(m))}catch(n){d(n)}},r=m=>{try{l(t.throw(m))}catch(n){d(n)}},l=m=>m.done?c(m.value):Promise.resolve(m.value).then(o,r);l((t=t.apply(s,a)).next())});import{R as j,r as u,j as e}from"./three-vendor-CsCe7JNW.js";import{u as F,a as I}from"./react-redux-ViurNiLh.js";import{d as k,g as v,e as $}from"./index-12U_mSTH.js";import{C as A}from"./chevron-down-Clk4hAWR.js";import{I as i}from"./Input-D0XREh7A.js";import"./react-vendor-DomL0yj5.js";function R({handleSelectChange:s,options:a,className:t,border:c,placeholder:d}){const[o,r]=j.useState(!1),[l,m]=j.useState(d);return u.useEffect(()=>{s(l)},[l]),e.jsxs("div",{className:`relative w-[115px] text-gray-400 mt-[13px] ${t}`,children:[e.jsxs("button",{onClick:()=>r(!o),className:`w-full flex items-center justify-between px-3 py-2 border border-gray-400 ${c?"border-none":""}`,children:[e.jsx("p",{className:`${c?"text-gray-400 font-normal text-sm md:text-base":""}`,children:l}),e.jsx(A,{className:`w-4 h-4 transition-transform ${o?"rotate-180":""}`})]}),o&&e.jsx("div",{className:"absolute w-full mt-1 border border-gray-200  bg-white shadow-lg ",children:e.jsx("ul",{className:"py-1",children:a.map(n=>e.jsx("li",{className:"px-3 py-1.5 hover:bg-gray-100 cursor-pointer",onClick:()=>{m(n.value),r(!1)},children:n.label},n.value))})})]})}const P=[{label:"Доставлен",value:"Доставлен"},{label:"Отменен",value:"Отменен"},{label:"Оплачен",value:"Оплачен"}];function M(){const s=F(),a=I(p=>p.user.orders||[]),[t,c]=u.useState(!0),[d,o]=u.useState(""),[r,l]=u.useState({name:"",number:"",date:"",client_name:"",state:"",order_amount:""}),m=p=>{l(x=>h(g({},x),{state:p}))},n=p=>{const{name:x,value:b}=p.target;x==="number"&&o(""),l(S=>h(g({},S),{[x]:b}))},N=p=>a.some(x=>x.number===p),C=p=>w(this,null,function*(){p.preventDefault();try{const x=Number(r.number);if(N(x)){o("Заказ с таким номером уже существует.");return}const b=h(g({},r),{number:x,order_amount:Number(r.order_amount)});yield s($(b)),yield s(v()),l({name:"",number:"",date:"",client_name:"",state:"",order_amount:""}),o(""),c(!1)}catch(x){console.error("Failed to create order:",x),o("Не удалось создать заказ. Пожалуйста, проверьте введенные данные.")}});return u.useEffect(()=>{s(k(t))},[t]),u.useEffect(()=>{s(v())},[]),e.jsx("section",{className:"fixed inset-0 flex items-center justify-center px-4 xs:px-5 sm:px-6 md:px-7 lg:px-8",children:e.jsxs("div",{className:`md:h-[70%] lg:h-[75%] bg-white py-[25px] xs:py-[28px] sm:py-[30px] md:py-[33px] lg:py-[35px] \r
      xl:py-[38px] px-4 xs:px-5 sm:px-6 md:px-7 lg:px-8 rounded-lg w-[90%] xs:w-[85%] sm:w-[80%] \r
      md:w-[70%] lg:w-[60%] xl:w-full max-w-[300px] xs:max-w-[350px] sm:max-w-[400px] md:max-w-[450px] l\r
      g:max-w-[500px] xl:max-w-[663px] relative overflow-y-auto`,children:[e.jsx("button",{onClick:()=>c(!1),className:"absolute top-2 xs:top-2.5 sm:top-3 md:top-3.5 lg:top-4 right-2 xs:right-2.5 sm:right-3 md:right-3.5 lg:right-4 text-gray-500 hover:text-gray-700",children:"✕"}),e.jsx("h2",{className:"text-center text-xl xs:text-2xl sm:text-2xl md:text-3xl lg:text-[32px] font-medium leading-[30px] xs:leading-[32px] sm:leading-[35px] md:leading-[38px] lg:leading-[40.8px] text-gray-400 mb-4 xs:mb-4.5 sm:mb-5 md:mb-5.5 lg:mb-10",children:"Добавить заказ"}),e.jsxs("form",{onSubmit:C,className:"space-y-[12px] xs:space-y-[14px] sm:space-y-[20px] md:space-y-[24px] lg:space-y-[40px]",children:[e.jsxs("div",{className:"space-y-[12px] xs:space-y-[14px] sm:space-y-[15px] md:space-y-[16px] lg:space-y-[18px]",children:[e.jsx(i,{type:"text",name:"name",placeholder:"Наименование заказа",value:r.name,onChange:n,required:!0}),e.jsxs("div",{children:[e.jsx(i,{type:"number",name:"number",placeholder:"Номер заказа",value:r.number,onChange:n,required:!0}),d&&e.jsx("p",{className:"text-red text-sm mt-1",children:d})]}),e.jsx(i,{type:"date",name:"date",value:r.date,onChange:n,required:!0}),e.jsx(i,{type:"text",name:"client_name",placeholder:"Данные клиента",value:r.client_name,onChange:n,required:!0}),e.jsx(R,{handleSelectChange:m,options:P,placeholder:"Статус заказа",border:!0,className:"w-full p-2 bg-gray-75 rounded focus:outline-none focus:ring-2 font-normal text-base text-gray-400 placeholder:text-gray-150"}),e.jsx(i,{type:"number",name:"order_amount",placeholder:"Сумма заказа",value:r.order_amount,onChange:n,required:!0})]}),e.jsx("button",{type:"submit",className:"w-full p-2 xs:p-2.5 sm:p-2.5 md:p-3 bg-gray-400 text-white uppercase rounded hover:bg-[#2F2F2F] transition-colors text-base xs:text-base sm:text-lg font-medium",children:"Сохранить"})]})]})})}export{M as default};
