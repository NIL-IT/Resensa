import{a as e,h as t,j as r}from"./index-B3pj02pG.js";import{useState as a,useRef as s}from"react";const n=({onFileSelect:n,findProduct:l,banner:o=!1})=>{const[i,c]=a(!1),[d,g]=a(""),p=s(null),{itemId:m,addNewItemPopup:u,news:x,solutions:f,equipment:h}=e((({user:e})=>e)),{pathname:b}=t(),j=b.split("/").at(-1);let v=l,y=4==+j;if(!l){const e=y?x:3==+j?f:h;v=e?.find((e=>+e.id==+m))}const[N,P]=a(y?v?.image:o?v?.image_banner:v?.image_card||null),D=e=>{e.preventDefault(),e.stopPropagation(),c("dragenter"===e.type||"dragover"===e.type)},w=e=>{if(["image/svg+xml","image/png","image/jpeg"].includes(e.type)){const t=URL.createObjectURL(e);P(t),n&&n(e),g("")}else g("Пожалуйста, загрузите PNG, или JPEG файл.")},k=()=>{N&&URL.revokeObjectURL(N),P(null),g(""),n&&n(null),p.current&&(p.current.value="")};return r.jsxs("div",{className:"w-full mx-auto",children:[N&&!u&&v?r.jsxs("div",{className:"relative p-8 mt-2 border-2 border-dashed rounded-lg text-center",children:[r.jsx("img",{src:N,alt:"Текущее изображение",className:"max-h-[200px] mx-auto rounded-lg"}),r.jsx("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),k()},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-gray-800 text-white rounded-full hover:bg-gray-900",children:"×"})]}):r.jsxs("div",{className:"relative p-8 mt-2 border-2 border-dashed rounded-lg text-center cursor-pointer transition-colors\n            "+(i?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragEnter:D,onDragLeave:D,onDragOver:D,onDrop:e=>{e.preventDefault(),e.stopPropagation(),c(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&w(e.dataTransfer.files[0])},onClick:()=>{p.current?.click()},children:[r.jsx("input",{ref:p,type:"file",accept:".svg,.png,.jpg,.jpeg",onChange:e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&w(e.target.files[0])},className:"hidden"}),N?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:N,alt:"Предпросмотр",className:"max-h-[200px] mx-auto rounded-lg"}),r.jsx("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),k()},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-gray-800 text-white rounded-full hover:bg-gray-900",children:"×"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[r.jsx("span",{className:"font-semibold",children:"Нажмите, чтобы загрузить"})," ","или перетащите"]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["PNG, JPG"," ",y?"(Рекомендуемое разрешение 847 x 300 px)":o?"(Рекомендуемое разрешение 1920 x 900 px)":"(Рекомендуемое разрешение 320 x 320 px)"]})]})]}),d&&r.jsx("p",{className:"mt-2 text-red-500 text-sm",children:d})]})};export{n as I};
