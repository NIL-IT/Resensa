var b=Object.defineProperty,v=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var p=(s,e,t)=>e in s?b(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,h=(s,e)=>{for(var t in e||(e={}))k.call(e,t)&&p(s,t,e[t]);if(f)for(var t of f(e))j.call(e,t)&&p(s,t,e[t]);return s},x=(s,e)=>v(s,N(e));var g=(s,e,t)=>new Promise((i,l)=>{var c=a=>{try{r(t.next(a))}catch(n){l(n)}},d=a=>{try{r(t.throw(a))}catch(n){l(n)}},r=a=>a.done?i(a.value):Promise.resolve(a.value).then(c,d);r((t=t.apply(s,e)).next())});import{jsx as o,jsxs as m}from"react/jsx-runtime";import S,{useEffect as C}from"react";import{useDispatch as F,useSelector as L}from"react-redux";import{x as u,W as y}from"../entry-server.js";import{useNavigate as R,Link as q}from"react-router-dom";import w from"js-cookie";import"react-dom/server";import"react-router-dom/server.mjs";import"react-fast-compare";import"invariant";import"shallowequal";import"clsx";import"tailwind-merge";import"@reduxjs/toolkit";import"axios";import"lucide-react";function U(){const s=F(),e=R(),{error:t}=L(r=>r.user),[i,l]=S.useState({username:"",password:""});C(()=>{s(u(!1)),w.get("access_token")&&(s(u(!0)),e("/admin/1"))},[s,e]);const c=r=>{l(x(h({},i),{[r.target.name]:r.target.value}))};return o("article",{className:"w-screen h-screen",children:m("div",{className:"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8",children:[m("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[o(q,{to:"/",children:o("img",{className:"mx-auto h-10 w-auto",src:"/icon/logo.svg",alt:"Recensa",title:"Recensa"})}),o("h2",{className:"mt-10 text-center text-2xl/9 font-bold tracking-tight text-gray-900",children:"Войти в аккаунт"})]}),o("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:m("form",{onSubmit:r=>g(this,null,function*(){r.preventDefault();try{const a=yield s(y(i));if(y.fulfilled.match(a)){const n=a.payload;w.set("access_token",n,{expires:1}),s(u(!0)),e("/admin/1")}}catch(a){console.error("Login failed:",a)}l({username:"",password:""})}),className:"space-y-6",children:[m("div",{children:[o("label",{htmlFor:"username",className:"block text-sm/6 font-medium text-gray-900",children:"Имя пользователя"}),o("div",{className:"mt-2",children:o("input",{type:"text",name:"username",id:"username",value:i.username,onChange:c,required:!0,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),m("div",{children:[o("div",{className:"flex items-center justify-between",children:o("label",{htmlFor:"password",className:"block text-sm/6 font-medium text-gray-900",children:"Пароль"})}),o("div",{className:"mt-2",children:o("input",{type:"password",name:"password",id:"password",value:i.password,onChange:c,required:!0,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-gray-400 sm:text-sm/6"})})]}),t&&o("div",{className:"text-red-500 text-sm text-center",children:t}),o("div",{children:o("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-gray-400 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-sm hover:bg-gray-300 transition-colors",children:"Войти"})})]})})]})})}export{U as default};
