import{u as e,I as s,a as t,J as a,z as l,j as o,L as r,a7 as n}from"./index-DTQxuYqs.js";import i,{useEffect as c}from"react";import"react-dom";function m(){const m=e(),u=s(),{error:d}=t((e=>e.user)),[x,f]=i.useState({username:"",password:""});c((()=>{m(a(!1));l.get("access_token")&&(m(a(!0)),u("/admin/1"))}),[m,u]);const h=e=>{f({...x,[e.target.name]:e.target.value})};return o.jsx("article",{className:"w-screen h-screen",children:o.jsxs("div",{className:"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[o.jsx(r,{to:"/",children:o.jsx("img",{className:"mx-auto h-10 w-auto",src:"/icon/logo.svg",alt:"Recensa",title:"Recensa"})}),o.jsx("h2",{className:"mt-10 text-center text-2xl/9 font-bold tracking-tight text-gray-900",children:"Войти в аккаунт"})]}),o.jsx("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:o.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e=await m(n(x));if(n.fulfilled.match(e)){const s=e.payload;l.set("access_token",s,{expires:1}),m(a(!0)),u("/admin/1")}}catch(s){console.error("Login failed:",s)}f({username:"",password:""})},className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"block text-sm/6 font-medium text-gray-900",children:"Имя пользователя"}),o.jsx("div",{className:"mt-2",children:o.jsx("input",{type:"text",name:"username",id:"username",value:x.username,onChange:h,required:!0,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("label",{htmlFor:"password",className:"block text-sm/6 font-medium text-gray-900",children:"Пароль"})}),o.jsx("div",{className:"mt-2",children:o.jsx("input",{type:"password",name:"password",id:"password",value:x.password,onChange:h,required:!0,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-gray-400 sm:text-sm/6"})})]}),d&&o.jsx("div",{className:"text-red-500 text-sm text-center",children:d}),o.jsx("div",{children:o.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-gray-400 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-sm hover:bg-gray-300 transition-colors",children:"Войти"})})]})})]})})}export{m as default};
