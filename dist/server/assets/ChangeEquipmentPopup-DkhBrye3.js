const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jodit-react-CV6O2yLS.js","assets/index-BzWKmBy6.js","assets/index-Cti87pq2.css"])))=>i.map(i=>d[i]);
import{u as e,h as a,a as t,j as r,i as s,b as l,k as n,l as d,m as i,_ as o}from"./index-BzWKmBy6.js";import{useState as c,useRef as x,Suspense as m,lazy as p}from"react";import{I as g}from"./Input-BMHyaEbX.js";import{I as _}from"./ImageUploader-lZ9zG34r.js";import{c as h}from"./data-6c0gwsFc.js";import"react-dom";const b=p((()=>o((()=>import("./jodit-react-CV6O2yLS.js").then((e=>e.j))),__vite__mapDeps([0,1,2])))),y=()=>{const o=e(),{pathname:p}=a(),y=p.split("/").at(-1),u=4==+y,j=3==+y;document.body.style.overflowY="hidden";const{itemId:f,equipment:w,solutions:N,news:v}=t((({user:e})=>e)),k=u?v:j?N:w,C=f?k?.find((e=>+e.id==+f)):null,[F,I]=c((()=>{const e=u?{title:C?.title||"",text:C?.text||"",page_description:C?.page_description||"",page_title:C?.page_title||"",page_keywords:C?.page_keywords||"",hidden_seo_text:C?.hidden_seo_text||""}:j?{name:C?.name||"",description:C?.description||"",sub_header:C?.sub_header||"",header:C?.header||"",image_banner_alt:C?.image_banner_alt||"",image_card_alt:C?.image_card_alt||"",page_description:C?.page_description||"",page_title:C?.page_title||"",page_keywords:C?.page_keywords||"",extra_description:C?.extra_description||"",hidden_seo_text:C?.hidden_seo_text||""}:{name:C?.name||"",description:C?.description||"",min_param:C?.min_param||"",max_param:C?.max_param||"",sub_header:C?.sub_header||"",header:C?.header||"",image_banner_alt:C?.image_banner_alt||"",image_card_alt:C?.image_card_alt||"",page_description:C?.page_description||"",page_title:C?.page_title||"",page_keywords:C?.page_keywords||"",extra_description:C?.extra_description||"",hidden_seo_text:C?.hidden_seo_text||""};return C?.image&&(u?e.news_photo=C.image:j?e.solution_photo=C.image:e.equipment_photo=C.image),e})),B=(e,a)=>{I((t=>({...t,[a]:e})))},[S,E]=c(),[A,D]=c(),O=e=>{const{name:a,value:t}=e.target;I((e=>({...e,[a]:t})))},P=x(null),q=x(null),T=x(null),K=x(null);return r.jsx("section",{className:"fixed inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"bg-white  h-[80%] py-[38px] px-8 \r\n      rounded-lg w-full max-w-[663px]  overflow-y-scroll overflow-x-hidden  relative",children:[r.jsx("button",{onClick:()=>{o(s(!1)),o(l(null))},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:"✕"}),r.jsx("h2",{className:"text-center text-[32px] font-medium leading-[40.8px] text-gray-400 mb-6",children:u?"Изменить новость":j?"Изменить решения":"Изменить оборудование"}),r.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{if(u){const e=S?{title:F.title,text:F.text,news_photo:S,page_description:F.page_description,page_title:F.page_title,page_keywords:F.page_keywords,hidden_seo_text:F.hidden_seo_text}:{title:F.title,text:F.text,page_description:F.page_description,page_title:F.page_title,page_keywords:F.page_keywords,hidden_seo_text:F.hidden_seo_text};await o(i({id:C?.id,data:e})).unwrap()}else{if(!j){const e={name:F.name,description:F.description,image_card:S,image_banner:A,min_param:parseInt(F.min_param),max_param:parseInt(F.max_param),sub_header:F?.sub_header,header:F?.header,image_banner_alt:F?.image_banner_alt,image_card_alt:F?.image_card_alt,extra_description:F?.extra_description,page_description:F?.page_description,page_title:F?.page_title,page_keywords:F?.page_keywords,hidden_seo_text:F?.hidden_seo_text};await o(n({id:C?.id,data:e})).unwrap()}else if(j){const e={name:F.name,description:F.description,image_card:S,image_banner:A,sub_header:F?.sub_header,header:F?.header,image_banner_alt:F?.image_banner_alt,image_card_alt:F?.image_card_alt,page_description:F?.page_description,page_title:F?.page_title,page_keywords:F?.page_keywords,extra_description:F?.extra_description,hidden_seo_text:F?.hidden_seo_text};await o(d({id:C?.id,data:e})).unwrap()}}o(s(!1)),o(l(null))}catch(a){alert(a.message||"Не удалось сохранить изменения. Возможно вы уже добавляли фотографию с таким названием, переименуйте и попробуйте снова.")}},className:"space-y-[18px]",children:[!u&&r.jsxs("div",{children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Изображение для баннера"}),r.jsx(_,{banner:!0,newsBanner:!!u,findProduct:C,onFileSelect:D}),r.jsxs("div",{className:"space-y-2 mt-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Alt-тег для баннера"}),r.jsx(g,{type:"text",name:"image_banner_alt",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:F.image_banner_alt,onChange:O,placeholder:"Описание изображения баннера"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Изображение для карточки"}),r.jsx(_,{findProduct:C,onFileSelect:E}),!u&&r.jsxs("div",{className:"space-y-2 mt-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Alt-тег для карточки"}),r.jsx(g,{type:"text",name:"image_card_alt",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:F.image_card_alt,onChange:O,placeholder:"Описание изображения карточки"})]})]}),u&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Название"}),r.jsx(g,{type:"text",name:"title",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:F.title,onChange:O})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"text",className:"block text-sm font-medium text-gray-900",children:"Текст новости"}),r.jsx(m,{fallback:r.jsx("div",{className:"border border-gray-300 h-[150px] w-full"}),children:r.jsx(b,{ref:P,value:F.text,config:h,onBlur:e=>B(e,"text")})})]})]}),!u&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Название"}),r.jsx(g,{type:"text",name:"name",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:F.name,onChange:O})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"message",className:"block text-sm text-gray-900",children:"Описание"}),r.jsx(m,{fallback:r.jsx("div",{className:"border border-gray-300 h-[150px] w-full"}),children:r.jsx(b,{ref:q,value:F.description,config:h,onBlur:e=>B(e,"description")})}),r.jsx("label",{htmlFor:"extra_description",className:"block text-sm text-gray-900 pt-4",children:"Полное описание товара"}),r.jsx(m,{fallback:r.jsx("div",{className:"border border-gray-300 h-[150px] w-full"}),children:r.jsx(b,{ref:T,value:F.extra_description,config:h,onBlur:e=>B(e,"extra_description")})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900 pt-4",children:"Заголовок баннера"}),r.jsx(g,{type:"text",name:"sub_header",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:F.sub_header,onChange:O})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"message",className:"block text-sm text-gray-900",children:"Текст баннера"}),r.jsx(m,{fallback:r.jsx("div",{className:"border border-gray-300 h-[150px] w-full"}),children:r.jsx(b,{ref:K,value:F.header,config:h,onBlur:e=>B(e,"header")})})]})]}),!j&&!u&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900 pt-4",children:"Минимальный параметр"}),r.jsx(g,{type:"text",name:"min_param",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:F.min_param,onChange:O})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Максимальный параметр"}),r.jsx(g,{type:"text",name:"max_param",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:F.max_param,onChange:O})]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-[18px]",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"SEO информация"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Заголовок страницы (Title)"}),r.jsx(g,{type:"text",name:"page_title",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:F.page_title,onChange:O,placeholder:"Заголовок для SEO"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Описание страницы (Description)"}),r.jsx("textarea",{name:"page_description",rows:"3",onChange:O,className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:F.page_description,placeholder:"Краткое описание для поисковых систем"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Текст для поисковых систем"}),r.jsx("textarea",{name:"hidden_seo_text",rows:"3",onChange:O,className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:F.hidden_seo_text,placeholder:"Этот текст предназначен для поисковых систем и не виден пользователям. "})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Ключевые слова (Keywords)"}),r.jsx(g,{type:"text",name:"page_keywords",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:F.page_keywords,onChange:O,placeholder:"Ключевые слова через запятую"})]})]}),r.jsx("button",{type:"submit",className:"w-full p-3 bg-gray-400 text-white rounded hover:bg-[#2F2F2F] transition-colors text-lg font-medium",children:"ИЗМЕНИТЬ"})]})]})})};export{y as default};
