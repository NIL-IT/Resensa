var D=Object.defineProperty,q=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var w=(t,r,e)=>r in t?D(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,u=(t,r)=>{for(var e in r||(r={}))I.call(r,e)&&w(t,e,r[e]);if(f)for(var e of f(r))j.call(r,e)&&w(t,e,r[e]);return t},g=(t,r)=>q(t,F(r));var v=(t,r,e)=>new Promise((c,d)=>{var x=n=>{try{l(e.next(n))}catch(o){d(o)}},s=n=>{try{l(e.throw(n))}catch(o){d(o)}},l=n=>n.done?c(n.value):Promise.resolve(n.value).then(x,s);l((e=e.apply(t,r)).next())});import{jsx as m,jsxs as h}from"react/jsx-runtime";import{useState as y,useEffect as N}from"react";import{useDispatch as A,useSelector as k}from"react-redux";import{d as E,g as _,S as P,e as z}from"../entry-server.js";import{I as i}from"./Input-WT1WDFhC.js";import"react-dom/server";import"react-router-dom/server.mjs";import"react-fast-compare";import"invariant";import"shallowequal";import"clsx";import"tailwind-merge";import"react-router-dom";import"@reduxjs/toolkit";import"axios";import"js-cookie";import"lucide-react";const B=[{label:"Доставлен",value:"Доставлен"},{label:"Отменен",value:"Отменен"},{label:"Оплачен",value:"Оплачен"}];function re(){const t=A(),r=k(p=>p.user.orders||[]),[e,c]=y(!0),[d,x]=y(""),[s,l]=y({name:"",number:"",date:"",client_name:"",state:"",order_amount:""}),n=p=>{l(a=>g(u({},a),{state:p}))},o=p=>{const{name:a,value:b}=p.target;a==="number"&&x(""),l(S=>g(u({},S),{[a]:b}))},C=p=>r.some(a=>a.number===p),O=p=>v(this,null,function*(){p.preventDefault();try{const a=Number(s.number);if(C(a)){x("Заказ с таким номером уже существует.");return}const b=g(u({},s),{number:a,order_amount:Number(s.order_amount)});yield t(z(b)),yield t(_()),l({name:"",number:"",date:"",client_name:"",state:"",order_amount:""}),x(""),c(!1)}catch(a){console.error("Failed to create order:",a),x("Не удалось создать заказ. Пожалуйста, проверьте введенные данные.")}});return N(()=>{t(E(e))},[e]),N(()=>{t(_())},[]),m("section",{className:"fixed inset-0 flex items-center justify-center px-4 xs:px-5 sm:px-6 md:px-7 lg:px-8",children:h("div",{className:`md:h-[70%] lg:h-[75%] bg-white py-[25px] xs:py-[28px] sm:py-[30px] md:py-[33px] lg:py-[35px] \r
      xl:py-[38px] px-4 xs:px-5 sm:px-6 md:px-7 lg:px-8 rounded-lg w-[90%] xs:w-[85%] sm:w-[80%] \r
      md:w-[70%] lg:w-[60%] xl:w-full max-w-[300px] xs:max-w-[350px] sm:max-w-[400px] md:max-w-[450px] l\r
      g:max-w-[500px] xl:max-w-[663px] relative overflow-y-auto`,children:[m("button",{onClick:()=>c(!1),className:"absolute top-2 xs:top-2.5 sm:top-3 md:top-3.5 lg:top-4 right-2 xs:right-2.5 sm:right-3 md:right-3.5 lg:right-4 text-gray-500 hover:text-gray-700",children:"✕"}),m("h2",{className:"text-center text-xl xs:text-2xl sm:text-2xl md:text-3xl lg:text-[32px] font-medium leading-[30px] xs:leading-[32px] sm:leading-[35px] md:leading-[38px] lg:leading-[40.8px] text-gray-400 mb-4 xs:mb-4.5 sm:mb-5 md:mb-5.5 lg:mb-10",children:"Добавить заказ"}),h("form",{onSubmit:O,className:"space-y-[12px] xs:space-y-[14px] sm:space-y-[20px] md:space-y-[24px] lg:space-y-[40px]",children:[h("div",{className:"space-y-[12px] xs:space-y-[14px] sm:space-y-[15px] md:space-y-[16px] lg:space-y-[18px]",children:[m(i,{type:"text",name:"name",placeholder:"Наименование заказа",value:s.name,onChange:o,required:!0}),h("div",{children:[m(i,{type:"number",name:"number",placeholder:"Номер заказа",value:s.number,onChange:o,required:!0}),d&&m("p",{className:"text-red text-sm mt-1",children:d})]}),m(i,{type:"date",name:"date",value:s.date,onChange:o,required:!0}),m(i,{type:"text",name:"client_name",placeholder:"Данные клиента",value:s.client_name,onChange:o,required:!0}),m(P,{handleSelectChange:n,options:B,placeholder:"Статус заказа",border:!0,className:"w-full p-2 bg-gray-75 rounded focus:outline-none focus:ring-2 font-normal text-base text-gray-400 placeholder:text-gray-150"}),m(i,{type:"number",name:"order_amount",placeholder:"Сумма заказа",value:s.order_amount,onChange:o,required:!0})]}),m("button",{type:"submit",className:"w-full p-2 xs:p-2.5 sm:p-2.5 md:p-3 bg-gray-400 text-white uppercase rounded hover:bg-[#2F2F2F] transition-colors text-base xs:text-base sm:text-lg font-medium",children:"Сохранить"})]})]})})}export{re as default};
