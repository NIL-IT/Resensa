const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jodit-react-DeFiFyBQ.js","assets/index-Deu1w7_j.js","assets/index-DeaRImsw.css"])))=>i.map(i=>d[i]);
import{u as A,h as O,a as T,j as e,i as w,b as N,k as z,l as J,m as K,_ as U}from"./index-Deu1w7_j.js";import{useState as u,useRef as x,Suspense as g,lazy as V}from"react";import{I as i}from"./Input-Cy5-2YzI.js";import{I as v}from"./ImageUploader-CRFjJrDE.js";import{c as _}from"./data-B0z0wmyU.js";import"react-dom";const h=V(()=>U(()=>import("./jodit-react-DeFiFyBQ.js").then(n=>n.j),__vite__mapDeps([0,1,2]))),Z=()=>{const n=A(),{pathname:k}=O(),b=k.split("/").at(-1),r=+b==4,o=+b==3;document.body.style.overflowY="hidden";const{itemId:y,equipment:F,solutions:E,news:C}=T(({user:s})=>s),t=y?(r?C:o?E:F)?.find(s=>+s.id==+y):null,[a,f]=u(()=>{const s=r?{title:t?.title||"",text:t?.text||"",page_description:t?.page_description||"",page_title:t?.page_title||"",page_keywords:t?.page_keywords||"",hidden_seo_text:t?.hidden_seo_text||""}:o?{name:t?.name||"",description:t?.description||"",sub_header:t?.sub_header||"",header:t?.header||"",image_banner_alt:t?.image_banner_alt||"",image_card_alt:t?.image_card_alt||"",page_description:t?.page_description||"",page_title:t?.page_title||"",page_keywords:t?.page_keywords||"",extra_description:t?.extra_description||"",hidden_seo_text:t?.hidden_seo_text||""}:{name:t?.name||"",description:t?.description||"",min_param:t?.min_param||"",max_param:t?.max_param||"",sub_header:t?.sub_header||"",header:t?.header||"",image_banner_alt:t?.image_banner_alt||"",image_card_alt:t?.image_card_alt||"",page_description:t?.page_description||"",page_title:t?.page_title||"",page_keywords:t?.page_keywords||"",extra_description:t?.extra_description||"",hidden_seo_text:t?.hidden_seo_text||""};return t?.image&&(r?s.news_photo=t.image:o?s.solution_photo=t.image:s.equipment_photo=t.image),s}),p=(s,d)=>{f(c=>({...c,[d]:s}))},[m,S]=u(),[j,I]=u(),l=s=>{const{name:d,value:c}=s.target;f(L=>({...L,[d]:c}))},D=x(null),q=x(null),B=x(null),R=x(null),P=async s=>{s.preventDefault();try{if(r){const d=m?{title:a.title,text:a.text,news_photo:m,page_description:a.page_description,page_title:a.page_title,page_keywords:a.page_keywords,hidden_seo_text:a.hidden_seo_text}:{title:a.title,text:a.text,page_description:a.page_description,page_title:a.page_title,page_keywords:a.page_keywords,hidden_seo_text:a.hidden_seo_text};await n(K({id:t?.id,data:d})).unwrap()}else if(!o){const c={name:a.name,description:a.description,image_card:m,image_banner:j,min_param:parseInt(a.min_param),max_param:parseInt(a.max_param),sub_header:a?.sub_header,header:a?.header,image_banner_alt:a?.image_banner_alt,image_card_alt:a?.image_card_alt,extra_description:a?.extra_description,page_description:a?.page_description,page_title:a?.page_title,page_keywords:a?.page_keywords,hidden_seo_text:a?.hidden_seo_text};await n(z({id:t?.id,data:c})).unwrap()}else if(o){const c={name:a.name,description:a.description,image_card:m,image_banner:j,sub_header:a?.sub_header,header:a?.header,image_banner_alt:a?.image_banner_alt,image_card_alt:a?.image_card_alt,page_description:a?.page_description,page_title:a?.page_title,page_keywords:a?.page_keywords,extra_description:a?.extra_description,hidden_seo_text:a?.hidden_seo_text};await n(J({id:t?.id,data:c})).unwrap()}n(w(!1)),n(N(null))}catch(d){alert(d.message||"Не удалось сохранить изменения. Возможно вы уже добавляли фотографию с таким названием, переименуйте и попробуйте снова.")}};return e.jsx("section",{className:"fixed inset-0 flex items-center justify-center",children:e.jsxs("div",{className:`bg-white  h-[80%] py-[38px] px-8 \r
      rounded-lg w-full max-w-[663px]  overflow-y-scroll overflow-x-hidden  relative`,children:[e.jsx("button",{onClick:()=>{n(w(!1)),n(N(null))},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:"✕"}),e.jsx("h2",{className:"text-center text-[32px] font-medium leading-[40.8px] text-gray-400 mb-6",children:r?"Изменить новость":o?"Изменить решения":"Изменить оборудование"}),e.jsxs("form",{onSubmit:P,className:"space-y-[18px]",children:[!r&&e.jsxs("div",{children:[e.jsx("p",{className:"w-full text-sm text-gray-900",children:"Изображение для баннера"}),e.jsx(v,{banner:!0,newsBanner:!!r,findProduct:t,onFileSelect:I}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsx("p",{className:"w-full text-sm text-gray-900",children:"Alt-тег для баннера"}),e.jsx(i,{type:"text",name:"image_banner_alt",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:a.image_banner_alt,onChange:l,placeholder:"Описание изображения баннера"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"w-full text-sm text-gray-900",children:"Изображение для карточки"}),e.jsx(v,{findProduct:t,onFileSelect:S}),!r&&e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsx("p",{className:"w-full text-sm text-gray-900",children:"Alt-тег для карточки"}),e.jsx(i,{type:"text",name:"image_card_alt",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:a.image_card_alt,onChange:l,placeholder:"Описание изображения карточки"})]})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"w-full text-sm text-gray-900",children:"Название"}),e.jsx(i,{type:"text",name:"title",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:a.title,onChange:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"text",className:"block text-sm font-medium text-gray-900",children:"Текст новости"}),e.jsx(g,{fallback:e.jsx("div",{className:"border border-gray-300 h-[150px] w-full"}),children:e.jsx(h,{ref:D,value:a.text,config:_,onBlur:s=>p(s,"text")})})]})]}),!r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"w-full text-sm text-gray-900",children:"Название"}),e.jsx(i,{type:"text",name:"name",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:a.name,onChange:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"message",className:"block text-sm text-gray-900",children:"Описание"}),e.jsx(g,{fallback:e.jsx("div",{className:"border border-gray-300 h-[150px] w-full"}),children:e.jsx(h,{ref:q,value:a.description,config:_,onBlur:s=>p(s,"description")})}),e.jsx("label",{htmlFor:"extra_description",className:"block text-sm text-gray-900 pt-4",children:"Полное описание товара"}),e.jsx(g,{fallback:e.jsx("div",{className:"border border-gray-300 h-[150px] w-full"}),children:e.jsx(h,{ref:B,value:a.extra_description,config:_,onBlur:s=>p(s,"extra_description")})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"w-full text-sm text-gray-900 pt-4",children:"Заголовок баннера"}),e.jsx(i,{type:"text",name:"sub_header",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:a.sub_header,onChange:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"message",className:"block text-sm text-gray-900",children:"Текст баннера"}),e.jsx(g,{fallback:e.jsx("div",{className:"border border-gray-300 h-[150px] w-full"}),children:e.jsx(h,{ref:R,value:a.header,config:_,onBlur:s=>p(s,"header")})})]})]}),!o&&!r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"w-full text-sm text-gray-900 pt-4",children:"Минимальный параметр"}),e.jsx(i,{type:"text",name:"min_param",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:a.min_param,onChange:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"w-full text-sm text-gray-900",children:"Максимальный параметр"}),e.jsx(i,{type:"text",name:"max_param",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:a.max_param,onChange:l})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-[18px]",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"SEO информация"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"w-full text-sm text-gray-900",children:"Заголовок страницы (Title)"}),e.jsx(i,{type:"text",name:"page_title",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:a.page_title,onChange:l,placeholder:"Заголовок для SEO"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"w-full text-sm text-gray-900",children:"Описание страницы (Description)"}),e.jsx("textarea",{name:"page_description",rows:"3",onChange:l,className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:a.page_description,placeholder:"Краткое описание для поисковых систем"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"w-full text-sm text-gray-900",children:"Текст для поисковых систем"}),e.jsx("textarea",{name:"hidden_seo_text",rows:"3",onChange:l,className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:a.hidden_seo_text,placeholder:"Этот текст предназначен для поисковых систем и не виден пользователям. "})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"w-full text-sm text-gray-900",children:"Ключевые слова (Keywords)"}),e.jsx(i,{type:"text",name:"page_keywords",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:a.page_keywords,onChange:l,placeholder:"Ключевые слова через запятую"})]})]}),e.jsx("button",{type:"submit",className:"w-full p-3 bg-gray-400 text-white rounded hover:bg-[#2F2F2F] transition-colors text-lg font-medium",children:"ИЗМЕНИТЬ"})]})]})})};export{Z as default};
