import{x as n,t as m,j as e,R as u}from"./index-DZeHIetG.js";import f,{useEffect as h}from"react";import{u as p,a as g}from"./react-redux-CU_QkE1y.js";import{L as y}from"./index-C9pb9WF4.js";import{b as j}from"./index-DpG3TTMi.js";import"react-dom";function F(){const s=p(),l=j(),{error:r}=g(t=>t.user),[a,i]=f.useState({username:"",password:""});h(()=>{s(n(!1)),m.get("access_token")&&(s(n(!0)),l("/admin/1"))},[s,l]);const c=t=>{i({...a,[t.target.name]:t.target.value})},d=async t=>{t.preventDefault();try{const o=await s(u(a));if(u.fulfilled.match(o)){const x=o.payload;m.set("access_token",x,{expires:1}),s(n(!0)),l("/admin/1")}}catch(o){console.error("Login failed:",o)}i({username:"",password:""})};return e.jsx("article",{className:"w-screen h-screen",children:e.jsxs("div",{className:"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[e.jsx(y,{to:"/",children:e.jsx("img",{className:"mx-auto h-10 w-auto",src:"/icon/logo.svg",alt:"Recensa",title:"Recensa"})}),e.jsx("h2",{className:"mt-10 text-center text-2xl/9 font-bold tracking-tight text-gray-900",children:"Войти в аккаунт"})]}),e.jsx("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm/6 font-medium text-gray-900",children:"Имя пользователя"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{type:"text",name:"username",id:"username",value:a.username,onChange:c,required:!0,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("label",{htmlFor:"password",className:"block text-sm/6 font-medium text-gray-900",children:"Пароль"})}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{type:"password",name:"password",id:"password",value:a.password,onChange:c,required:!0,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-gray-400 sm:text-sm/6"})})]}),r&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:r}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-gray-400 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-sm hover:bg-gray-300 transition-colors",children:"Войти"})})]})})]})})}export{F as default};
