import{a as V,h as W,j as s}from"./index-6089ff6d.js";import{useState as u,useRef as w}from"react";const R=({onFileSelect:a,findProduct:c,banner:d=!1})=>{const[h,p]=u(!1),[g,l]=u(""),t=w(null),{itemId:D,addNewItemPopup:v,news:j,solutions:U,equipment:k}=V(({user:e})=>e),{pathname:C}=W(),b=C.split("/").at(-1);let o=c,n=+b==4,I=+b==3;c||(o=(n?j:I?U:k)?.find(m=>+m.id==+D));const[r,f]=u(n?o?.image:d?o?.image_banner:o?.image_card||null),i=e=>{e.preventDefault(),e.stopPropagation(),p(e.type==="dragenter"||e.type==="dragover")},x=e=>{if(["image/svg+xml","image/png","image/jpeg"].includes(e.type)){const m=URL.createObjectURL(e);f(m),a&&a(e),l("")}else l("Пожалуйста, загрузите PNG, или JPEG файл.")},E=e=>{e.preventDefault(),e.stopPropagation(),p(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&x(e.dataTransfer.files[0])},T=e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&x(e.target.files[0])},y=()=>{t.current?.click()},N=()=>{r&&URL.revokeObjectURL(r),f(null),l(""),a&&a(null),t.current&&(t.current.value="")};return s.jsxDEV("div",{className:"w-full mx-auto",children:[r&&!v&&o?s.jsxDEV("div",{className:"relative p-8 mt-2 border-2 border-dashed rounded-lg text-center",children:[s.jsxDEV("img",{src:r,alt:"Текущее изображение",className:"max-h-[200px] mx-auto rounded-lg"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:88,columnNumber:11},globalThis),s.jsxDEV("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),N()},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-gray-800 text-white rounded-full hover:bg-gray-900",children:"×"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:93,columnNumber:11},globalThis)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:87,columnNumber:9},globalThis):s.jsxDEV("div",{className:`relative p-8 mt-2 border-2 border-dashed rounded-lg text-center cursor-pointer transition-colors
            ${h?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:i,onDragLeave:i,onDragOver:i,onDrop:E,onClick:y,children:[s.jsxDEV("input",{ref:t,type:"file",accept:".svg,.png,.jpg,.jpeg",onChange:T,className:"hidden"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:119,columnNumber:11},globalThis),r?s.jsxDEV(s.Fragment,{children:[s.jsxDEV("img",{src:r,alt:"Предпросмотр",className:"max-h-[200px] mx-auto rounded-lg"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:129,columnNumber:15},globalThis),s.jsxDEV("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),N()},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center bg-gray-800 text-white rounded-full hover:bg-gray-900",children:"×"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:134,columnNumber:15},globalThis)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:128,columnNumber:13},globalThis):s.jsxDEV(s.Fragment,{children:[s.jsxDEV("p",{className:"mb-2 text-sm text-gray-500",children:[s.jsxDEV("span",{className:"font-semibold",children:"Нажмите, чтобы загрузить"},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:149,columnNumber:17},globalThis)," ","или перетащите"]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:148,columnNumber:15},globalThis),s.jsxDEV("p",{className:"text-xs text-gray-500",children:["PNG, JPG"," ",n?"(Рекомендуемое разрешение 847 x 300 px)":d?"(Рекомендуемое разрешение 1920 x 900 px)":"(Рекомендуемое разрешение 320 x 320 px)"]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:152,columnNumber:15},globalThis)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:147,columnNumber:13},globalThis)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:106,columnNumber:9},globalThis),g&&s.jsxDEV("p",{className:"mt-2 text-red-500 text-sm",children:g},void 0,!1,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:165,columnNumber:17},globalThis)]},void 0,!0,{fileName:"C:/Users/user/Desktop/Code/Work/resensa/src/components/ui/ImageUploader.jsx",lineNumber:85,columnNumber:5},globalThis)};export{R as I};
