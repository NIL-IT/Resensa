const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jodit-react-BeVYaeHj.js","assets/index-CSr2Rt0T.js","assets/index-Clibuwr4.css"])))=>i.map(i=>d[i]);
import{u as e,h as a,a as t,j as r,i as s,b as l,k as n,l as d,m as i,_ as o}from"./index-CSr2Rt0T.js";import{useState as c,useEffect as x,useRef as m,Suspense as p,lazy as g}from"react";import{I as _}from"./Input-D4yml1Wf.js";import{I as h}from"./ImageUploader-DZrBXAHh.js";import{c as b}from"./data-6c0gwsFc.js";import"react-dom";const y=g((()=>o((()=>import("./jodit-react-BeVYaeHj.js").then((e=>e.j))),__vite__mapDeps([0,1,2])))),u=()=>{const o=e(),{path:g,setPathname:u}=c("");x((()=>{const{pathname:e}=a();u(e)}),[]);const j=g.split("/").at(-1),f=4==+j,w=3==+j;document.body.style.overflowY="hidden";const{itemId:N,equipment:v,solutions:k,news:C}=t((({user:e})=>e)),F=f?C:w?k:v,I=N?F?.find((e=>+e.id==+N)):null,[B,S]=c((()=>{const e=f?{title:I?.title||"",text:I?.text||"",page_description:I?.page_description||"",page_title:I?.page_title||"",page_keywords:I?.page_keywords||"",hidden_seo_text:I?.hidden_seo_text||""}:w?{name:I?.name||"",description:I?.description||"",sub_header:I?.sub_header||"",header:I?.header||"",image_banner_alt:I?.image_banner_alt||"",image_card_alt:I?.image_card_alt||"",page_description:I?.page_description||"",page_title:I?.page_title||"",page_keywords:I?.page_keywords||"",extra_description:I?.extra_description||"",hidden_seo_text:I?.hidden_seo_text||""}:{name:I?.name||"",description:I?.description||"",min_param:I?.min_param||"",max_param:I?.max_param||"",sub_header:I?.sub_header||"",header:I?.header||"",image_banner_alt:I?.image_banner_alt||"",image_card_alt:I?.image_card_alt||"",page_description:I?.page_description||"",page_title:I?.page_title||"",page_keywords:I?.page_keywords||"",extra_description:I?.extra_description||"",hidden_seo_text:I?.hidden_seo_text||""};return I?.image&&(f?e.news_photo=I.image:w?e.solution_photo=I.image:e.equipment_photo=I.image),e})),E=(e,a)=>{S((t=>({...t,[a]:e})))},[P,A]=c(),[D,O]=c(),q=e=>{const{name:a,value:t}=e.target;S((e=>({...e,[a]:t})))},T=m(null),K=m(null),L=m(null),R=m(null);return r.jsx("section",{className:"fixed inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"bg-white  h-[80%] py-[38px] px-8 \r\n      rounded-lg w-full max-w-[663px]  overflow-y-scroll overflow-x-hidden  relative",children:[r.jsx("button",{onClick:()=>{o(s(!1)),o(l(null))},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:"✕"}),r.jsx("h2",{className:"text-center text-[32px] font-medium leading-[40.8px] text-gray-400 mb-6",children:f?"Изменить новость":w?"Изменить решения":"Изменить оборудование"}),r.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{if(f){const e=P?{title:B.title,text:B.text,news_photo:P,page_description:B.page_description,page_title:B.page_title,page_keywords:B.page_keywords,hidden_seo_text:B.hidden_seo_text}:{title:B.title,text:B.text,page_description:B.page_description,page_title:B.page_title,page_keywords:B.page_keywords,hidden_seo_text:B.hidden_seo_text};await o(i({id:I?.id,data:e})).unwrap()}else{if(!w){const e={name:B.name,description:B.description,image_card:P,image_banner:D,min_param:parseInt(B.min_param),max_param:parseInt(B.max_param),sub_header:B?.sub_header,header:B?.header,image_banner_alt:B?.image_banner_alt,image_card_alt:B?.image_card_alt,extra_description:B?.extra_description,page_description:B?.page_description,page_title:B?.page_title,page_keywords:B?.page_keywords,hidden_seo_text:B?.hidden_seo_text};await o(n({id:I?.id,data:e})).unwrap()}else if(w){const e={name:B.name,description:B.description,image_card:P,image_banner:D,sub_header:B?.sub_header,header:B?.header,image_banner_alt:B?.image_banner_alt,image_card_alt:B?.image_card_alt,page_description:B?.page_description,page_title:B?.page_title,page_keywords:B?.page_keywords,extra_description:B?.extra_description,hidden_seo_text:B?.hidden_seo_text};await o(d({id:I?.id,data:e})).unwrap()}}o(s(!1)),o(l(null))}catch(a){alert(a.message||"Не удалось сохранить изменения. Возможно вы уже добавляли фотографию с таким названием, переименуйте и попробуйте снова.")}},className:"space-y-[18px]",children:[!f&&r.jsxs("div",{children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Изображение для баннера"}),r.jsx(h,{banner:!0,newsBanner:!!f,findProduct:I,onFileSelect:O}),r.jsxs("div",{className:"space-y-2 mt-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Alt-тег для баннера"}),r.jsx(_,{type:"text",name:"image_banner_alt",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:B.image_banner_alt,onChange:q,placeholder:"Описание изображения баннера"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Изображение для карточки"}),r.jsx(h,{findProduct:I,onFileSelect:A}),!f&&r.jsxs("div",{className:"space-y-2 mt-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Alt-тег для карточки"}),r.jsx(_,{type:"text",name:"image_card_alt",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:B.image_card_alt,onChange:q,placeholder:"Описание изображения карточки"})]})]}),f&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Название"}),r.jsx(_,{type:"text",name:"title",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:B.title,onChange:q})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"text",className:"block text-sm font-medium text-gray-900",children:"Текст новости"}),r.jsx(p,{fallback:r.jsx("div",{className:"border border-gray-300 h-[150px] w-full"}),children:r.jsx(y,{ref:T,value:B.text,config:b,onBlur:e=>E(e,"text")})})]})]}),!f&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Название"}),r.jsx(_,{type:"text",name:"name",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:B.name,onChange:q})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"message",className:"block text-sm text-gray-900",children:"Описание"}),r.jsx(p,{fallback:r.jsx("div",{className:"border border-gray-300 h-[150px] w-full"}),children:r.jsx(y,{ref:K,value:B.description,config:b,onBlur:e=>E(e,"description")})}),r.jsx("label",{htmlFor:"extra_description",className:"block text-sm text-gray-900 pt-4",children:"Полное описание товара"}),r.jsx(p,{fallback:r.jsx("div",{className:"border border-gray-300 h-[150px] w-full"}),children:r.jsx(y,{ref:L,value:B.extra_description,config:b,onBlur:e=>E(e,"extra_description")})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900 pt-4",children:"Заголовок баннера"}),r.jsx(_,{type:"text",name:"sub_header",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:B.sub_header,onChange:q})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"message",className:"block text-sm text-gray-900",children:"Текст баннера"}),r.jsx(p,{fallback:r.jsx("div",{className:"border border-gray-300 h-[150px] w-full"}),children:r.jsx(y,{ref:R,value:B.header,config:b,onBlur:e=>E(e,"header")})})]})]}),!w&&!f&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900 pt-4",children:"Минимальный параметр"}),r.jsx(_,{type:"text",name:"min_param",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:B.min_param,onChange:q})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Максимальный параметр"}),r.jsx(_,{type:"text",name:"max_param",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:B.max_param,onChange:q})]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-[18px]",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"SEO информация"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Заголовок страницы (Title)"}),r.jsx(_,{type:"text",name:"page_title",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:B.page_title,onChange:q,placeholder:"Заголовок для SEO"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Описание страницы (Description)"}),r.jsx("textarea",{name:"page_description",rows:"3",onChange:q,className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:B.page_description,placeholder:"Краткое описание для поисковых систем"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Текст для поисковых систем"}),r.jsx("textarea",{name:"hidden_seo_text",rows:"3",onChange:q,className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:B.hidden_seo_text,placeholder:"Этот текст предназначен для поисковых систем и не виден пользователям. "})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"w-full text-sm text-gray-900",children:"Ключевые слова (Keywords)"}),r.jsx(_,{type:"text",name:"page_keywords",className:"block p-2.5 w-full text-base text-gray-400 font-normal bg-gray-50 rounded-lg border border-gray-300",value:B.page_keywords,onChange:q,placeholder:"Ключевые слова через запятую"})]})]}),r.jsx("button",{type:"submit",className:"w-full p-3 bg-gray-400 text-white rounded hover:bg-[#2F2F2F] transition-colors text-lg font-medium",children:"ИЗМЕНИТЬ"})]})]})})};export{u as default};
